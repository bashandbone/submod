<!-- Saved from local source at 2025-06-26T01:06:11Z using monolith v2.10.1 -->
<!DOCTYPE html><html lang="en"><head><meta http-equiv="Content-Security-Policy" content="default-src 'unsafe-eval' 'unsafe-inline' data:; style-src 'none'; font-src 'none'; script-src 'none'; img-src data:;"></meta><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Calculate the changes that would need to be applied to `lhs` to get `rhs` using `objects` to obtain objects as needed for traversal. `state` can be used between multiple calls to re-use memory."><title>tree in gix::diff - Rust</title><script></script><link rel="stylesheet"><link rel="stylesheet"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="gix" data-themes="" data-resource-suffix="" data-rustdoc-version="1.87.0 (17067e9ac 2025-05-09)" data-channel="1.87.0" data-search-js="search-e7298875.js" data-settings-js="settings-d72f25bb.js"><script></script><script defer=""></script><script defer=""></script><!--noscript--><!--/noscript--><link rel="alternate icon" type="image/png"><link rel="icon" type="image/svg+xml"><meta name="robots" content="none"></meta></head><body class="rustdoc fn"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="./gix2/doc/gix/index.html">gix</a><span class="version">0.72.1</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">tree</a></h2><h3><a href="#">Sections</a></h3><ul class="block top-toc"><li><a href="#notes" title="Notes">Notes</a></li></ul></section><div id="rustdoc-modnav"><h2><a href="./gix2/doc/gix/diff/index.html">In gix::<wbr>diff</a></h2></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><div class="rustdoc-breadcrumbs"><a href="./gix2/doc/gix/index.html">gix</a>::<wbr><a href="./gix2/doc/gix/diff/index.html">diff</a></div><h1>Function <span class="fn">tree</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"></span></div><pre class="rust item-decl"><code>pub fn tree&lt;StateMut&gt;(
    lhs: <a class="struct" href="./gix2/doc/gix/diff/object/struct.TreeRefIter.html" title="struct gix::diff::object::TreeRefIter">TreeRefIter</a>&lt;'_&gt;,
    rhs: <a class="struct" href="./gix2/doc/gix/diff/object/struct.TreeRefIter.html" title="struct gix::diff::object::TreeRefIter">TreeRefIter</a>&lt;'_&gt;,
    state: StateMut,
    objects: impl <a class="trait" href="./gix2/doc/gix/prelude/trait.Find.html" title="trait gix::prelude::Find">Find</a>,
    delegate: &amp;mut impl <a class="trait" href="./gix2/doc/gix/diff/tree/trait.Visit.html" title="trait gix::diff::tree::Visit">Visit</a>,
) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.87.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.87.0/std/primitive.unit.html">()</a>, <a class="enum" href="./gix2/doc/gix/diff/tree/enum.Error.html" title="enum gix::diff::tree::Error">Error</a>&gt;<div class="where">where
    StateMut: <a class="trait" href="https://doc.rust-lang.org/1.87.0/core/borrow/trait.BorrowMut.html" title="trait core::borrow::BorrowMut">BorrowMut</a>&lt;<a class="struct" href="./gix2/doc/gix/diff/tree/struct.State.html" title="struct gix::diff::tree::State">State</a>&gt;,</div></code></pre><details class="toggle top-doc" open=""><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Calculate the changes that would need to be applied to <code>lhs</code> to get <code>rhs</code> using <code>objects</code> to obtain objects as needed for traversal.
<code>state</code> can be used between multiple calls to re-use memory.</p>
<ul>
<li>The <code>state</code> maybe owned or mutably borrowed to allow reuses allocated data structures through multiple runs.</li>
<li><code>delegate</code> will receive the computed changes, see the <a href="./gix2/doc/gix/diff/tree/trait.Visit.html" title="trait gix::diff::tree::Visit"><code>Visit</code></a> trait for more information on what to expect.</li>
</ul>
<h2 id="notes"><a class="doc-anchor" href="#notes">§</a>Notes</h2>
<ul>
<li><code>lhs</code> can be an empty tree to simulate what would happen if the left-hand side didn’t exist.</li>
<li>To obtain progress, implement it within the <code>delegate</code>.</li>
<li>Tree entries are expected to be ordered using <a href="https://github.com/git/git/blob/ef8ce8f3d4344fd3af049c17eeba5cd20d98b69f/tree-diff.c#L72-L88"><code>tree-entry-comparison</code></a> (the same <a href="https://github.com/GitoxideLabs/gitoxide/blob/795962b107d86f58b1f7c75006da256d19cc80ad/gix-object/src/tree/mod.rs#L263-L273">in Rust</a>)</li>
<li>it does a breadth first iteration as buffer space only fits two trees, the current one on the one we compare with.</li>
<li>does not do rename tracking but attempts to reduce allocations to zero (so performance is mostly determined
by the delegate implementation which should be as specific as possible. Rename tracking can be computed on top of the changes
received by the <code>delegate</code>.</li>
<li>cycle checking is not performed, but can be performed in the delegate which can return
<a href="./gix2/doc/gix/diff/tree/visit/enum.Action.html#variant.Cancel" title="variant gix::diff::tree::visit::Action::Cancel"><code>tree::visit::Action::Cancel</code></a> to stop the traversal.</li>
</ul>
</div></details></section></div></main></body></html>
